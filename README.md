# สร้าง Test Case แบบ Unit Testing สำหรับ API ในระบบจัดการสินค้า โดยใช้ Jest
Task Week 4 : Back-End Dev for Dev Init
Authors
assignment by @BorntoDev
implementation by @Chuntawat

เมื่อต้องการ test ระบบให้ Run ระบบจัดการสินค้านี้ ด้วย Code
#npm run test 

## กรณีการทดสอบ test case

### **POST /products**

- **ควรสร้างสินค้าใหม่**
  - ส่งข้อมูลสินค้าใหม่ที่มี `name`, `category`, `price`, และ `stock`
  - ตรวจสอบว่าสถานะ Response เป็น 201 (Created)
  - ตรวจสอบว่าข้อมูลสินค้าที่ได้รับกลับมามีรูปแบบตรงตามที่คาดหวัง (มี `id`, `name`, `category`, `price`, `stock`)

- **ควรแสดงข้อผิดพลาด 400 เมื่อฟิลด์ที่จำเป็นขาดหายไป**
  - ส่งข้อมูลสินค้าใหม่โดยไม่มีข้อมูล `{}`
  - ตรวจสอบว่าสถานะ Response เป็น 400 (Bad Request)
  - ตรวจสอบว่าข้อความแสดงข้อผิดพลาดระบุว่า "กรุณาระบุค่าทุกฟิลด์ที่จำเป็น"

- **ควรแสดงข้อผิดพลาด 400 เมื่อประเภทของข้อมูลไม่ถูกต้อง**
  - ส่งข้อมูลสินค้าใหม่โดยมีประเภทข้อมูลไม่ถูกต้อง (เช่น `name: 123`, `price: '100'`)
  - ตรวจสอบว่าสถานะ Response เป็น 400 (Bad Request)
  - ตรวจสอบว่าข้อความแสดงข้อผิดพลาดระบุว่า "ประเภทของค่าไม่ถูกต้อง"

- **ควรแสดงข้อผิดพลาด 400 เมื่อราคาหรือจำนวนสินค้าคงคลังน้อยกว่าหรือเท่ากับ 0**
  - ส่งข้อมูลสินค้าใหม่โดยมี `price` หรือ `stock` น้อยกว่าหรือเท่ากับ 0
  - ตรวจสอบว่าสถานะ Response เป็น 400 (Bad Request)
  - ตรวจสอบว่าข้อความแสดงข้อผิดพลาดระบุว่า "ราคาและจำนวนสินค้าคงคลังต้องมากกว่า 0"

### **GET /products**

- **ควรแสดงสินค้าทั้งหมด**
  - ส่งคำขอเพื่อรับรายการสินค้าทั้งหมด
  - ตรวจสอบว่าสถานะ Response เป็น 200 (OK)
  - ตรวจสอบว่าข้อมูลที่ได้รับกลับมาเป็นอาร์เรย์ของสินค้า

### **PUT /products/:id**

- **ควรอัปเดตสินค้าที่มีอยู่**
  - ส่งข้อมูลสินค้าที่อัปเดตแล้วที่มี `name`, `category`, `price`, และ `stock`
  - ตรวจสอบว่าสินค้าได้รับการอัปเดตสำเร็จตามไอดีที่ระบุ
  - ตรวจสอบว่าข้อมูลสินค้าที่ได้รับกลับมามีรูปแบบตรงตามที่คาดหวัง (มี `id`, `name`, `category`, `price`, `stock`)

- **ควรแสดงข้อผิดพลาด 400 เมื่อฟิลด์ที่จำเป็นขาดหายไป**
  - ส่งคำขออัปเดตโดยไม่มีข้อมูล `{}`
  - ตรวจสอบว่าสถานะ Response เป็น 400 (Bad Request)
  - ตรวจสอบว่าข้อความแสดงข้อผิดพลาดระบุว่า "กรุณาระบุค่าทุกฟิลด์ที่จำเป็น"

- **ควรแสดงข้อผิดพลาด 400 เมื่อประเภทของข้อมูลไม่ถูกต้อง**
  - ส่งคำขออัปเดตโดยมีประเภทข้อมูลไม่ถูกต้อง (เช่น `name: 123`, `price: '100'`)
  - ตรวจสอบว่าสถานะ Response เป็น 400 (Bad Request)
  - ตรวจสอบว่าข้อความแสดงข้อผิดพลาดระบุว่า "ประเภทของค่าไม่ถูกต้อง"

- **ควรแสดงข้อผิดพลาด 400 เมื่อราคาหรือจำนวนสินค้าคงคลังน้อยกว่าหรือเท่ากับ 0**
  - ส่งคำขออัปเดตโดยมี `price` หรือ `stock` น้อยกว่าหรือเท่ากับ 0
  - ตรวจสอบว่าสถานะ Response เป็น 400 (Bad Request)
  - ตรวจสอบว่าข้อความแสดงข้อผิดพลาดระบุว่า "ราคาและจำนวนสินค้าคงคลังต้องมากกว่า 0"

- **ควรแสดงข้อผิดพลาด 404 เมื่อไม่พบสินค้า**
  - ส่งคำขออัปเดตโดยใช้ไอดีที่ไม่มีอยู่จริง (เช่น `/products/999`)
  - ตรวจสอบว่าสถานะ Response เป็น 404 (Not Found)
  - ตรวจสอบว่าข้อความแสดงข้อผิดพลาดระบุว่า "ไม่พบสินค้าที่ต้องการ"

### **DELETE /products/:id**

- **ควรลบสินค้า**
  - ส่งคำขอเพื่อลบสินค้าโดยระบุไอดีของสินค้า
  - ตรวจสอบว่าสถานะ Response เป็น 200 (OK)
  - ตรวจสอบว่าข้อความแสดงความสำเร็จระบุว่า "สินค้าถูกลบแล้ว และได้รีไอดีสินค้าทั้งหมดใหม่"

- **ควรแสดงข้อผิดพลาด 404 เมื่อไม่พบสินค้า**
  - ส่งคำขอเพื่อลบสินค้าโดยใช้ไอดีที่ไม่มีอยู่จริง (เช่น `/products/999`)
  - ตรวจสอบว่าสถานะ Response เป็น 404 (Not Found)
  - ตรวจสอบว่าข้อความแสดงข้อผิดพลาดระบุว่า "ไม่พบสินค้าที่ต้องการ"

### **DELETE /products**

- **ควรลบสินค้าทั้งหมดและรีเซ็ตไอดี**
  - ส่งคำขอเพื่อลบสินค้าทั้งหมด
  - ตรวจสอบว่าสถานะ Response เป็น 200 (OK)
  - ตรวจสอบว่าข้อความแสดงความสำเร็จระบุว่า "สินค้าทั้งหมดถูกลบแล้ว และได้รีไอดีสินค้าทั้งหมดใหม่"
 
  ![image](https://github.com/6431503009/Product-Management-System---Unit-Testing/assets/97873903/5ecd3c84-5373-4772-9470-13b210b5d16e)

## หมายเหตุในกรณีการทดสอบ test case 
** ในกรณี ตรวจสอบเงื่อนไขอื่นๆ
    
![image](https://github.com/6431503009/Product-Management-System---Unit-Testing/assets/97873903/74c784f3-a680-47af-974a-ca96a4076d83)

** การตรวจสอบเงื่อนไขและแสดงผลข้อความตามเงื่อนไข โดยมีรายละเอียดดังนี้:

- เงื่อนไขแรก: if (price <= 0 || stock <= 0) ตรวจสอบว่าราคา (price) น้อยกว่าหรือเท่ากับ 0 หรือปริมาณสินค้า (stock) น้อยกว่าหรือเท่ากับ 0
- 2. ถ้าเงื่อนไขแรกเป็นจริง (true), จะทำการแสดงข้อความ "ราคาและจำนวนสินค้าต้องมากกว่า 0" โดยใช้คำสั่ง return res.status(400).json({ message: 'ราคาและจำนวนสินค้าต้องมากกว่า 0' });
- 3. ซึ่งคำสั่ง return res.status(400).json({ message: 'ราคาและจำนวนสินค้าต้องมากกว่า 0' }); จะส่งคืนข้อความ "ราคาและจำนวนสินค้าต้องมากกว่า 0" พร้อมกับ HTTP status code 400 (Bad Request) ในรูปแบบ JSON
โดยรวมแล้วโค้ดนี้เป็นการตรวจสอบว่าราคาและปริมาณสินค้าจะต้องมีค่ามากกว่า 0 ก่อนที่จะดำเนินการต่อไป

** จาก process เบื้องต้นที่ได้อธิบายไป

![image](https://github.com/6431503009/Product-Management-System---Unit-Testing/assets/97873903/2922fb7b-bab4-47cf-8a1e-5b89a3115650)

เมื่อ price,stock หรืออย่างใดอย่างนึง = 0 จะไม่สามารถ test case ผ่านได้ เนื่องจากเก็บค่า ใน sql เก็บค่า 0 จะเท่ากับ null หรือก็คือค่าว่าง 

![image](https://github.com/6431503009/Product-Management-System---Unit-Testing/assets/97873903/1133d3fc-fcc1-441c-8c5e-bdd3b0af6c51)

ตัว api ก็จะส่ง กรุณาระบุค่าทุกฟิลด์ที่จำเป็น มาเเทนเนื่องจาก 0 กลายเป็นค่า null


